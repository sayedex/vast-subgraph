type Collection @entity(immutable: false) {
  id: ID!

  creator: Bytes!
  address: Bytes!

  collectionSize: BigInt!
  totalMinted: BigInt!

  logoUri: String!
  coverUri: String!
  name:String!
  symbol:String!

  collectionType: String! # SINGLE | MULTI

  createdAt: BigInt!
  ended: Boolean!

  # publicSale: PublicSaleConfig!
  # presale: PresaleConfig!
  editions: [Edition!]! @derivedFrom(field: "collection")
}


type Edition @entity(immutable: false)  {
  id: ID!                      # {collection}-{tokenId}

  collection: Collection!

  tokenId: BigInt!             # 0 for ERC721, real id for 1155

  maxSupply: BigInt!
  totalMinted: BigInt!

  uri: String!

  publicSale: PublicSaleConfig
  presale: PresaleConfig
}



type PublicSaleConfig @entity(immutable: false){
  id: ID!                      # {editionId}-public

  edition: Edition!

  price: BigInt!
  maxPerWallet: BigInt!

  startTime: BigInt!
  endTime: BigInt!

  active: Boolean!
}



# type PresaleConfig @entity(immutable: false) {
#   id: ID! # same as collection.id

#   collection: Collection!

#   price: BigInt!
#   maxPerWallet: BigInt!
#   presaleSupply: BigInt!
#   presaleMinted: BigInt!
#   startTime: BigInt!
#   endTime: BigInt!
#   merkleRoot: Bytes!
#   disabled: Boolean!
# }


type PresaleConfig @entity(immutable: false) {
  id: ID!                      # {editionId}-presale

  edition: Edition!

  price: BigInt!
  maxPerWallet: BigInt!
  presaleSupply: BigInt!
  presaleMinted: BigInt!
  startTime: BigInt!
  endTime: BigInt!

  merkleRoot: Bytes!

  active: Boolean!
}



type Mint @entity(immutable: true) {
  id: ID!
  collection: Collection!
  user: Bytes!
  quantity: BigInt!
  type: String!
  timestamp: BigInt!
}
